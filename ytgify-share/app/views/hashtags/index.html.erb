<div class="container mx-auto px-4 py-8">
  <div class="max-w-6xl mx-auto">
    <!-- Page Header -->
    <div class="bg-gray-900 rounded-lg border border-gray-800 p-8 mb-6">
      <div class="flex items-center justify-between mb-4">
        <div>
          <h1 class="text-4xl font-bold text-white mb-2">Browse Hashtags</h1>
          <p class="text-gray-400">Discover popular topics and trends</p>
        </div>

        <!-- Trending Link -->
        <%= link_to trending_hashtags_path, class: "px-6 py-3 bg-gradient-to-r from-[#E91E8C] to-[#7B2FBE] text-white rounded-full hover:opacity-90 font-medium transition-all" do %>
          <div class="flex items-center space-x-2">
            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7h8m0 0v8m0-8l-8 8-4-4-6 6" />
            </svg>
            <span>View Trending</span>
          </div>
        <% end %>
      </div>

      <!-- Sort Options -->
      <div class="flex items-center space-x-2 border-t border-gray-800 pt-4">
        <span class="text-sm font-medium text-gray-400">Sort by:</span>
        <%= link_to hashtags_path(sort: 'alphabetical'),
            class: "px-4 py-2 rounded-full text-sm font-medium transition-colors #{params[:sort].nil? || params[:sort] == 'alphabetical' ? 'bg-[#E91E8C]/20 text-[#E91E8C]' : 'text-gray-400 hover:bg-gray-800'}" do %>
          A-Z
        <% end %>
        <%= link_to hashtags_path(sort: 'popular'),
            class: "px-4 py-2 rounded-full text-sm font-medium transition-colors #{params[:sort] == 'popular' ? 'bg-[#E91E8C]/20 text-[#E91E8C]' : 'text-gray-400 hover:bg-gray-800'}" do %>
          Most Popular
        <% end %>
        <%= link_to hashtags_path(sort: 'recent'),
            class: "px-4 py-2 rounded-full text-sm font-medium transition-colors #{params[:sort] == 'recent' ? 'bg-[#E91E8C]/20 text-[#E91E8C]' : 'text-gray-400 hover:bg-gray-800'}" do %>
          Recently Added
        <% end %>
      </div>
    </div>

    <!-- Hashtags Grid -->
    <% if @hashtags.any? %>
      <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 mb-8">
        <% @hashtags.each do |hashtag| %>
          <%= link_to hashtag_path(hashtag.name), class: "block bg-gray-900 rounded-lg border border-gray-800 hover:border-gray-700 transition-all p-6 group" do %>
            <div class="flex items-start justify-between">
              <!-- Hashtag Info -->
              <div class="flex-1 min-w-0">
                <h3 class="text-xl font-bold text-white mb-1 group-hover:text-[#E91E8C] transition-colors truncate">
                  #<%= hashtag.name %>
                </h3>
                <p class="text-sm text-gray-400">
                  <%= pluralize(hashtag.usage_count, 'GIF') %>
                </p>
              </div>

              <!-- Icon -->
              <div class="flex-shrink-0 ml-4">
                <svg class="w-8 h-8 text-gray-600 group-hover:text-[#E91E8C] transition-colors" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 20l4-16m2 16l4-16M6 9h14M4 15h14" />
                </svg>
              </div>
            </div>

            <!-- Timestamp for Recent Sort -->
            <% if params[:sort] == 'recent' %>
              <p class="text-xs text-gray-500 mt-2">
                Added <%= time_ago_in_words(hashtag.created_at) %> ago
              </p>
            <% end %>
          <% end %>
        <% end %>
      </div>

      <!-- Pagination -->
      <% if @pagy.pages > 1 %>
        <div class="flex justify-center items-center space-x-2">
          <%== pagy_nav(@pagy, link_extra: 'class="px-4 py-2 border border-gray-700 rounded-md hover:bg-gray-800 transition-colors text-gray-300"') %>
        </div>
      <% end %>
    <% else %>
      <!-- Empty State -->
      <div class="bg-gray-900 rounded-lg border border-gray-800 p-12 text-center">
        <svg class="mx-auto h-20 w-20 text-gray-600 mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 20l4-16m2 16l4-16M6 9h14M4 15h14" />
        </svg>
        <h3 class="text-lg font-semibold text-white mb-2">No hashtags yet</h3>
        <p class="text-gray-400 mb-6">Start creating GIFs with hashtags to build the community!</p>
        <% if user_signed_in? %>
          <%= link_to new_gif_path, class: "inline-block px-6 py-3 bg-gradient-to-r from-[#E91E8C] to-[#7B2FBE] text-white rounded-full hover:opacity-90 font-medium transition-colors" do %>
            Create Your First GIF
          <% end %>
        <% else %>
          <%= link_to new_user_session_path, class: "inline-block px-6 py-3 bg-gradient-to-r from-[#E91E8C] to-[#7B2FBE] text-white rounded-full hover:opacity-90 font-medium transition-colors" do %>
            Sign In to Create
          <% end %>
        <% end %>
      </div>
    <% end %>
  </div>
</div>
